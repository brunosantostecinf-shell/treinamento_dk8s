Instalando o nosso cluster Kubernetes
Como dissemos, para esse nosso exemplo iremos utilizar o cluster de Kubernetes da AWS, o EKS. Para instalar o nosso cluster EKS, iremos utilizar a ferramenta eksctl, portanto precisamos instal√°-la em nossa m√°quina. Para instalar a ferramenta, basta executar o seguinte comando:

```
ARCH=amd64
PLATFORM=$(uname -s)_$ARCH
curl -sLO "https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_$PLATFORM.tar.gz"
curl -sL "https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_checksums.txt" | grep $PLATFORM | sha256sum --check
tar -xzf eksctl_$PLATFORM.tar.gz -C /tmp && rm eksctl_$PLATFORM.tar.gz
sudo install -m 0755 /tmp/eksctl /usr/local/bin && rm /tmp/eksctl
eksctl verison
```

Precisamos ter o CLI da aws instalado em nossa m√°quina, para isso, basta executar o seguinte comando:

```
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install
```

Pronto, agora voc√™ j√° tem o eksctl e o aws instalados em sua m√°quina.

Para que possamos criar tudo o que precisamos na AWS, √© importante que voc√™ tenha uma conta na AWS, e que tenha as credenciais de acesso configuradas em sua m√°quina. Para configurar as credenciais de acesso, basta executar o seguinte comando:

```
aws configure
```

O comando acima ir√° solicitar que voc√™ informe a sua AWS Access Key ID, a sua AWS Secret Access Key, a sua Default region name, e o seu Default output format. Para saber mais sobre como configurar as credenciais de acesso, basta acessar a documenta√ß√£o oficial da AWS.

No comando acima estamos baixando o bin√°rio do eksctl compactado e descompactando ele na pasta /tmp, e depois movendo o bin√°rio para a pasta /usr/local/bin.

Lembrando que estou instando em uma m√°quina Linux, caso que esteja utilizando uma m√°quina Mac ou Windows, basta acessar a p√°gina de releases do projeto e baixar a vers√£o adequada para o seu sistema operacional.

E enquanto voc√™ faz a instala√ß√£o, vale a pena mencionar que o eksctl √© uma ferramenta criada pela WeaveWorks, empresa que criou o Flux, que √© um projeto de GitOps para Kubernetes, al√©m de ter o Weavenet, que √© um CNI para Kubernetes, e o Weave Scope, que √© uma ferramenta de visualiza√ß√£o de clusters de Kubernetes e muito mais, recomendo que voc√™s d√™em uma olhada nos projetos, √© sensacional!

Bem, agora voc√™ j√° tem o eksctl instalado em sua m√°quina, ent√£o vamos criar o nosso cluster EKS! Para isso, basta executar o seguinte comando:

```
eksctl create cluster --name=eks-cluster --version=1.24 --region=us-east-1 --nodegroup-name=eks-cluster-nodegroup --node-type=t3.medium --nodes=2 --nodes-min=1 --nodes-max=3 --managed
```

O comando acima ir√° criar um cluster EKS com o nome eks-cluster, na regi√£o us-east-1, com 2 n√≥s do tipo t3.medium, e com um m√≠nimo de 1 n√≥ e um m√°ximo de 3 n√≥s. Al√©m disso, o comando acima ir√° criar um nodegroup chamado eks-cluster-nodegroup. O eksctl ir√° cuidar de toda a infraestrutura necess√°ria para o funcionamento do nosso cluster EKS. A vers√£o do Kubernetes que ser√° instalada no nosso cluster ser√° a 1.24.

Ap√≥s a cria√ß√£o do nosso cluster EKS, precisamos instalar o kubectl em nossa m√°quina. Para instalar o kubectl, basta executar o seguinte comando:

```
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
chmod +x ./kubectl
sudo mv ./kubectl /usr/local/bin/kubectl
```

O comando acima ir√° baixar o bin√°rio do kubectl e o colocar na pasta /usr/local/bin, e dar permiss√£o de execu√ß√£o para o bin√°rio.

Agora que j√° temos o kubectl instalado em nossa m√°quina, precisamos configurar o kubectl para utilizar o nosso cluster EKS. Para isso, basta executar o seguinte comando:

```
aws eks --region us-east-1 update-kubeconfig --name eks-cluster
```

Aonde us-east-1 √© a regi√£o do nosso cluster EKS, e eks-cluster √© o nome do nosso cluster EKS. Esse comando √© necess√°rio para que o kubectl saiba qual cluster ele deve utilizar, ele ir√° pegar as credenciais do nosso cluster EKS e armazenar no arquivo ~/.kube/config.

LEMBRE-SE: Voc√™ n√£o precisa ter o Kubernetes rodando no EKS, fique a vontade para escolher onde preferir para seguir o treinamento.

Vamos ver se o kubectl est√° funcionando corretamente? Para isso, basta executar o seguinte comando:

```
kubectl get nodes
```

Se tudo estiver funcionando corretamente, voc√™ dever√° ver uma lista com os n√≥s do seu cluster EKS. üòÑ

Antes de seguirmos em frente, vamos conhecer algums comandos do eksctl, para que possamos gerenciar o nosso cluster EKS. Para listar os clusters EKS que temos em nossa conta, basta executar o seguinte comando:

```
eksctl get cluster -A
```

O parametro -A √© para listar os clusters EKS de todas as regi√µes. Para listar os clusters EKS de uma regi√£o espec√≠fica, basta executar o seguinte comando:

```
eksctl get cluster -r us-east-1
```

Para aumentar o n√∫mero de n√≥s do nosso cluster EKS, basta executar o seguinte comando:

```
eksctl scale nodegroup --cluster=eks-cluster --nodes=3 --nodes-min=1 --nodes-max=3 --name=eks-cluster-nodegroup -r us-east-1
```

Para diminuir o n√∫mero de n√≥s do nosso cluster EKS, basta executar o seguinte comando:

```
eksctl scale nodegroup --cluster=eks-cluster --nodes=1 --nodes-min=1 --nodes-max=3 --name=eks-cluster-nodegroup -r us-east-1
```

Para deletar o nosso cluster EKS, basta executar o seguinte comando:

```
eksctl delete cluster --name=eks-cluster -r us-east-1
```

Mas n√£o delete o nosso cluster EKS, vamos utilizar ele para os pr√≥ximos passos! hahahah